# практика


Подготовка

   Для проведения тестов подготовим виртуальную машину VirtualBox на Windows 10 [Version 10.0.19045.4291]
   
   ![image](https://github.com/user-attachments/assets/32a5fd1d-b769-4284-8b78-272c2e5625e9)
   
   Установим и настроим виртуальную машину Windows 10 на гипервизор
«Oracle VM VirtualBox». Для этого скачаем средство виртуализации
«VirtualBox», ISO-образ операционной системы Windows 10 и установим
виртуальную операционную систему.

   ![image](https://github.com/user-attachments/assets/5096d945-8df8-4b43-8864-996ee3b8e23e)

   

Часть 1. Сканирование виртуальной машины на windows10 без файрвола

1. Сканируем локальную сеть
   
 Проведем сканирование на уязвимости. Для этого будем использовать
«Nmap» - утилиту, предназначенную для сканирования IP-сетей в сочетании со
скриптом vulners, систему комплексного анализа защищенности «Сканер-ВС 6»
разработанный компанией «НПО «Эшелон» и «Nessus Vulnerability Scanner» от
компании «Tenable, Inc».
Рассмотрим простой сценарий, в котором найдем исследуемое устройство
в локальной сети. Узнаем IP адрес нашей машины командой ip address (Рисунок
2), и, с помощью утилиты netdiscover просканируем сеть командой netdiscover -
r 192.168.1.0/24

   ip adress
   
   ![изображение](https://github.com/user-attachments/assets/b4efcfd6-c678-4af1-aa1b-3e4ee576b78e)

   netdiscover -r 192.168.1.0/24
   
   ![изображение](https://github.com/user-attachments/assets/2e5e2e9d-d0e8-4e04-8334-2e3382266336)

   Обнаружили вируальную машину
   
2. Используем nmap для обнаружения открытых портов, версии ОС
 
 После того, как мы узнали IP-адрес нашей цели, можем применить утилиту
«Nmap» для обнаружения открытых портов, версии операционной системы и
проверки на уязвимости командой nmap -A -sV -oN nmapscanvulners.txt --script
8
vulners 192.168.1.41

   nmap -A -sV -oN nmapscan.txt 192.168.1.41
   
   ![изображение](https://github.com/user-attachments/assets/42dab8ff-6ff5-439b-b63f-e793265275e2)

   nmap узнал открытые порты и версию ОС
   
3. Используем nmap в сочетании со скриптом vulners для проверки на уязвимости
 
   nmap -A -sV -oN nmapscanvulners.txt --script vulners 192.168.1.41

   ![изображение](https://github.com/user-attachments/assets/7f514cd4-36f8-4832-884e-709bce07b1a2)

   nmap не выявил уязвимостей :c
    Уязвимостей «Nmap» не обнаружил, но вывел открытые порты и
информацию о системе.


4. Сканер уязвимостей Сканер-ВС 6

Применим Сканер-ВС 6, для обнаружения уязвимостей, для этого, сначала,
запустим «Исследование сети», указав адрес цели и сканируемые порты

![изображение](https://github.com/user-attachments/assets/3bfdd09f-3499-4601-853d-bb09ca6c4908)


![изображение](https://github.com/user-attachments/assets/7a9d4b8e-bea7-43a4-a9d9-a3751f3596cd)


![изображение](https://github.com/user-attachments/assets/1a7aaf8e-de22-43a7-8bed-19f62f82d7cf)



![изображение](https://github.com/user-attachments/assets/9765f4b8-6496-47ca-bf01-93240ef7d50d)



 
   Сканирование портов
   
  ![изображение](https://github.com/user-attachments/assets/71c2beb0-9cf2-4431-88f5-f473d209cf0c)

  Сканирование на уязвимости
  
  ![изображение](https://github.com/user-attachments/assets/5f132123-38f9-40bb-8647-a865bb7fb13c)

 
  ![изображение](https://github.com/user-attachments/assets/385ffec2-aee3-4acd-b3be-cdf80c07835d)

  ![изображение](https://github.com/user-attachments/assets/ea2488b0-5d99-4074-ac01-aa29355b1cca)

Уязвимость в протоколе HTTP/2
CVE-2023-44487
Уязвимость реализации протокола HTTP/2 связана с возможностью
формирования потока запросов в рамках уже установленного сетевого
соединения без открытия новых сетевых соединений и без подтверждения
получения пакетов. Эксплуатация уязвимости может позволить нарушителю,
действующему удалённо, вызвать отказ в обслуживании.

Эксплуатация:
Уязвимость позволяет удаленному злоумышленнику вызвать отказ в обслуживании.

5. Сканер уязвимостей Nessus
Применим сканер уязвимостей «Nessus», выбираем базовое сетевое
сканирование и вводим IP-адрес цели

![изображение](https://github.com/user-attachments/assets/9058884c-efd1-49a9-93ac-67f73e386db8)


![изображение](https://github.com/user-attachments/assets/b52e8772-0b72-45ce-8fd6-16cbb903d017)


![изображение](https://github.com/user-attachments/assets/15762765-851f-457e-98a8-6825e3f3c5c7)






![изображение](https://github.com/user-attachments/assets/6c7f28a7-65cc-425a-8c95-f40f39cff102)

![изображение](https://github.com/user-attachments/assets/58e6ae1d-7c76-43cd-af74-389d3fe38cf7)


![изображение](https://github.com/user-attachments/assets/f99e7d8f-e52a-4578-855c-a10ae3737a2a)

 Не требуется подпись SMB. Злоумышленник, не проходя проверку
подлинности может использовать эту уязвимость для проведения атаки «человек
посередине» на SMB-сервер.




![изображение](https://github.com/user-attachments/assets/9e5d3d45-e264-4762-9cf8-4827c0ffcc70)

 Запрос метки времени ICMP. Удаленное раскрытие даты, удаленный
хост отвечает на запрос метки времени ICMP. Это позволяет злоумышленнику
узнать дату, установленную на целевой машине, что может помочь ему обойти
протоколы аутентификации, основанные на времени.


![изображение](https://github.com/user-attachments/assets/eed43b7a-e564-4680-b687-3eecb8e2a135)

Этот плагин представляет собой «полуоткрытый» сканер портов SYN. Он должен быть достаточно быстрым даже против цели, защищенной брандмауэром.

Обратите внимание, что сканирование SYN менее интрузивно, чем сканирование TCP (полное подключение) в отношении сломанных служб, но оно может вызвать проблемы для менее надежных межсетевых экранов, а также оставить незакрытые соединения на удаленной цели, если сеть загружена.
Решение
Защитите свою цель с помощью IP-фильтра.



Часть 2. Установка и настройка файрвола Tinywall

Tinywall автоматически переводит все порты в режим невидимки для того, чтобы скрыть их от внешних атак
Имеет 5 режимов работы: обычная защита, разрешить исходящие соединения, блокировать все, отключить фаервол и режим обучения
Тестирование будем проводить в режиме обычная защита

![image](https://github.com/user-attachments/assets/c70d91fe-19cd-4665-8d70-bf974b291f9e)


![image](https://github.com/user-attachments/assets/5a4b3e7f-360e-4f57-a162-febfa358b453)


![image](https://github.com/user-attachments/assets/5ffe741f-fba6-4654-8f93-aad551e285e7)

![image](https://github.com/user-attachments/assets/f3934789-c65f-4fe3-8af6-a4d23507fc9f)

Проверим, действительно ли Tinywall ограничивает доступ в интернет приложениям, не находящимся в белом списке
Воспользуемся небольшой программой 2ip Firewall Tester

![image](https://github.com/user-attachments/assets/23795a2e-95bf-4822-b8bb-ccdb741d547b)

Tinywall проходит тест


Часть 3. Сканирование виртуальной машины на windows10 с включенным файрволом tinywall

1.

  ip adress
   
   ![изображение](https://github.com/user-attachments/assets/9ad49f83-1b5d-42a5-8cdc-bd8f31738d90)


   netdiscover -r 192.168.1.0/24 

   ![изображение](https://github.com/user-attachments/assets/4d040d1e-3f7a-4e5f-aec1-b60803307a98)


2.

   nmap -A -sV 192.168.1.41 


   ![изображение](https://github.com/user-attachments/assets/528028f9-469a-4ea0-aa27-5f642ebc2841)

   nmap не обнаружил открытые порты

4. 

    nmap -A -sV --script vulners 192.168.1.41

   
   ![изображение](https://github.com/user-attachments/assets/1b76bff0-8a5f-4808-b245-e2bc478ebe76)

Видим, что «Tinywall» успешно перевел порты в режим «невидимки».
«Nmap» пишет, что порты фильтруются, это означает, что он не может
определить, открыт ли порт, поскольку фильтрация пакетов не позволяет этого
сделать. Фильтрация осуществляться благодаря межсетевому экрану «Tinywall».
Это позволяет защититься от атак злоумышленников, поскольку они получают
крайне мало информации.
6.

   Сканер-ВС 6
   
   ![изображение](https://github.com/user-attachments/assets/c68dbe13-1e2b-4e92-acac-52d9ef2b44b3)

   не получил никаких данных, сканирование на уязвимости невозможно

   
7.
   
   Сканер Nessus

   ![изображение](https://github.com/user-attachments/assets/51d47f7b-ecba-4a0b-bba4-d95d4fdb8fbb)

   ![изображение](https://github.com/user-attachments/assets/faacd5f9-cd63-40b0-a499-e87134aa0348)

   Аналогично, сканер Nessus не найдет информацию о системе
